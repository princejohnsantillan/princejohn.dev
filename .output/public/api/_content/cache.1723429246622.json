{"generatedAt":1723429252225,"generateTime":391,"contents":[{"_path":"/","_dir":"","_draft":false,"_partial":false,"_locale":"","title":"Prince John","description":"I am a PHP/Laravel Developer.","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I am a PHP/Laravel Developer."}]},{"type":"element","tag":"pre","props":{"className":"language-php shiki shiki-themes github-dark github-light","code":"echo \"This site is a work in progress!\";\n","language":"php","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" \"This site is a work in progress!\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":";\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.index.md","_source":"content","_file":"1.index.md","_extension":"md"},{"_path":"/articles","_dir":"","_draft":false,"_partial":false,"_locale":"","title":"Articles","description":"","body":{"type":"root","children":[{"type":"element","tag":"article-list","props":{},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.articles:0.index.md","_source":"content","_file":"2.articles/0.index.md","_extension":"md"},{"_path":"/articles/2024-halftime-report","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"2024 Halftime Report","description":"To be honest I don't know how to best describe what this year has been so far. What I am sure of is there are a handful of things I am grateful for..","layout":"article","publishAt":"2024-06-30","ogImage":true,"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To be honest I don't know how to best describe what this year has been so far. What I am sure of is there are a handful of things I am grateful for. So I guess I'll start there."}]},{"type":"element","tag":"h3","props":{"id":"church-wedding"},"children":[{"type":"text","value":"üíí Church Wedding"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"My wife and I already did a civil wedding 5 years ago but we really felt like we needed to do a church wedding. The details of our story deserves its own page, so for now I'll just say I'm glad we decided to do it. A union that started off with a lot rebellion, hurt, and brokenness is now fully redeemed. Relationships with family, church, and friends have been healed and strengthened. We can finally say a new and better chapter of our lives begins!"}]},{"type":"element","tag":"h3","props":{"id":"house-improvements"},"children":[{"type":"text","value":"üè° House Improvements"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We moved into this new home over a year ago. But only recently were we able to buy the furniture and appliances we wanted. There are more improvements we want to do but I am super grateful with what we have now and it has already elevated our living conditions."}]},{"type":"element","tag":"h3","props":{"id":"australia-trip"},"children":[{"type":"text","value":"üõ´ Australia Trip"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We are going to Australia this November! Woohoo! This will be our first international travel as a family. We already booked our airfare and accommodation and visas are being processed. We are hitting 2 goals with this travel, first is for me to join a Laravel Conference (a.k.a. Laracon) and second is family vacation!"}]},{"type":"element","tag":"h3","props":{"id":"officially-a-laravel-contributor"},"children":[{"type":"text","value":"üíª Officially a Laravel Contributor"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Obviously I am a Laravel enthusiast and I've been using the framework for work and for my personal projects. On Twitter/X I follow the top minds in the community, watching them build what they build is inspiring to me and makes me want build cool products/tools too. After a few years of just spectating I finally got myself to a point where I could contribute. These are small changes but it's a start and I'm excited to learn more and build more."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"PRs on "},{"type":"element","tag":"a","props":{"href":"https://github.com/laravel/framework/pulls?q=is%3Apr+author%3Aprincejohnsantillan+is%3Aclosed","rel":["nofollow"]},"children":[{"type":"text","value":"laravel/framework"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"PRs on "},{"type":"element","tag":"a","props":{"href":"https://github.com/laravel/laravel/pulls?q=is%3Apr+author%3Aprincejohnsantillan+is%3Aclosed","rel":["nofollow"]},"children":[{"type":"text","value":"laravel/laravel"}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It's not all sunshine and rainbows though, there are some areas of my life that's been difficult. Even as I am writing this I am wrestling whether I should add my personal project to the list above or not."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A little back story, before the year started I told my wife that I want to build a Software-as-a-Service (SaaS) product of my own and I want to spend my 2024 chasing that goal. It's not that I have a business idea that I'm 100% sure will take off, it's just that I want it for myself. I want to see myself build something from the ground up. I want to see what I can build with the skill set that God has allowed me to acquire if I give it my all. If what I build fails, it's fine. I am sure that the journey itself will be of value to me. I told her that I don't want to be on my deathbed not having a memory of a season where I really tried hard and gave it my all."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So here I am now in the middle of the year, and yes I made progress with my project but it's not as far as I thought it would have been already by now. What I've learnt so far is that it is hard to complete the "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"to do"}]},{"type":"text","value":" list if the "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"to be"}]},{"type":"text","value":" list is not completed first. A "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"to be"}]},{"type":"text","value":" list is character development. It's hard to do what Stephen Curry does if you don't even have the discipline to exercise. It's hard to do what Taylor Otwell does if you don't even have the focus to work on difficult or mundane tasks."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Yes the progress I made seems small, but this journey is exposing a lot of bad habits in me. I am realizing that this is part of the project. I feel like I haven't made the progress I want because my "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"to do"}]},{"type":"text","value":" list is still long, but at least my "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"to be"}]},{"type":"text","value":" list is shrinking. Some on the list that's ticked off are "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"proper sleep"}]},{"type":"text","value":", "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"habit of writing"}]},{"type":"text","value":", "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"shutting off social media"}]},{"type":"text","value":", "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"stop comparing and walk your own journey"}]},{"type":"text","value":", etc. There are a lot more to work on like "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"deep focus"}]},{"type":"text","value":", "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"eating healthy"}]},{"type":"text","value":" and "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"habit of reading"}]},{"type":"text","value":", I will eventually knock them off too."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So yeah, the first half of the year was also tough. It's hard to die to yourself to become a better person, but it must be done!"}]},{"type":"element","tag":"h2","props":{"id":"conclusion"},"children":[{"type":"text","value":"Conclusion"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I love the year so far, good things have happen and I am feeling some growing pains. What needs to happen is happening, a dying to oneself to become a better person. The fight is not over! It's only halftime, the project can still be completed! And a note to myself: Enjoy the journey!"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"church-wedding","depth":3,"text":"üíí Church Wedding"},{"id":"house-improvements","depth":3,"text":"üè° House Improvements"},{"id":"australia-trip","depth":3,"text":"üõ´ Australia Trip"},{"id":"officially-a-laravel-contributor","depth":3,"text":"üíª Officially a Laravel Contributor"},{"id":"conclusion","depth":2,"text":"Conclusion"}]}},"_type":"markdown","_id":"content:2.articles:2024-halftime-report.md","_source":"content","_file":"2.articles/2024-halftime-report.md","_extension":"md","head":{"script":[{"id":"nuxt-og-image-overrides","type":"application/json","processTemplateParams":true,"innerHTML":{"title":"2024 Halftime Report","excerpt":"To be honest I don't know how to best describe what this year has been so far. What I am sure of is there are a handful of things I am grateful for.."},"tagPosition":"bodyClose","tagPriority":30}],"meta":[{"property":"og:image","content":"/__og-image__/image/articles/2024-halftime-report/og.png"},{"property":"og:image:width","content":1200},{"property":"og:image:height","content":600},{"property":"og:image:type","content":"image/png"},{"property":"og:image:alt"},{"name":"twitter:card","content":"summary_large_image"},{"name":"twitter:image:src","content":"/__og-image__/image/articles/2024-halftime-report/og.png"},{"name":"twitter:image:width","content":1200},{"name":"twitter:image:height","content":600},{"name":"twitter:image:alt"}]}},{"_path":"/articles/daisy-chaining-laravel-jobs","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Daisy Chaining Laravel Jobs","description":"We overcame Laravel Vapor timeout limits by implementing cursor pagination via daisy chaining jobs.","layout":"article","publishAt":"2024-06-08","ogImage":true,"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So at work we needed to add Laravel scout, we decided to go with "},{"type":"element","tag":"a","props":{"href":"https://typesense.org/","rel":["nofollow"]},"children":[{"type":"text","value":"Typesense"}]},{"type":"text","value":". "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis was fairly easy to set up, just follow the "},{"type":"element","tag":"a","props":{"href":"https://laravel.com/docs/11.x/scout#typesense","rel":["nofollow"]},"children":[{"type":"text","value":"docs"}]},{"type":"text","value":"."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"We tested locally, using a dockerized Typesense via Laravel Sail. Import worked, search worked! Easy! ‚úÖ"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"We tested on staging, using Laravel Vapor. Import worked, search worked! Easy! ‚úÖ"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"We deployed to production, using Laravel Vapor. Import... failed! ‚ùå üò±"}]}]},{"type":"element","tag":"h2","props":{"id":"what-happened"},"children":[{"type":"text","value":"What happened?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In local we tested using "},{"type":"element","tag":"u","props":{},"children":[{"type":"text","value":"hundreds"}]},{"type":"text","value":" of rows. In staging we tested using "},{"type":"element","tag":"u","props":{},"children":[{"type":"text","value":"thousands"}]},{"type":"text","value":" of rows. But production had "},{"type":"element","tag":"u","props":{},"children":[{"type":"text","value":"millions"}]},{"type":"text","value":" of rows!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We ran "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"php artisan scout:import \"App\\Models\\Record\""}]},{"type":"text","value":" and it timed out. Ok maybe setting "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"SCOUT_QUEUE"}]},{"type":"text","value":" to "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":" is the only thing we need here. We changed it, redeployed, and reran the command; sadly it still timed out. Good news is we were seeing hundreds of jobs being processed, some of them successful and some failed. The errors were caused by "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"exceeding maximum retries"}]},{"type":"text","value":" and "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"database connection issues"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The model we were trying to import was using a view as its table so we reviewed the underlying query. We found out that it was inefficient because a couple of indexes were missing. We fixed the view and at the same time made a few Vapor config updates that we thought would help. We increased the "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"queue-memory"}]},{"type":"text","value":" and "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"queue-timeout"}]},{"type":"text","value":", reduced the "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"queue-concurrency"}]},{"type":"text","value":" value to avoid maxing out our database connections, and defined a dedicated queue so we can clear it by itself when we needed to."}]},{"type":"element","tag":"pre","props":{"className":"language-yml shiki shiki-themes github-dark github-light","code":"environments:\n  production:\n    queue-memory: 2048\n    queue-timeout: 300\n      queues:\n        - default-production\n        - scout-production: 50\n","language":"yml","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#85E89D;--shiki-default:#22863A"},"children":[{"type":"text","value":"environments"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#85E89D;--shiki-default:#22863A"},"children":[{"type":"text","value":"  production"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#85E89D;--shiki-default:#22863A"},"children":[{"type":"text","value":"    queue-memory"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"2048\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#85E89D;--shiki-default:#22863A"},"children":[{"type":"text","value":"    queue-timeout"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"300\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#85E89D;--shiki-default:#22863A"},"children":[{"type":"text","value":"      queues"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"        - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"default-production\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"        - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#85E89D;--shiki-default:#22863A"},"children":[{"type":"text","value":"scout-production"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"50\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ok, hopefully this does it. Again, we pushed the changes, redeployed, and reran the command. This time around the jobs were all successful but unfortunately the artisan command still timed out and couldn't complete the import. Not there yet but it's good progress, maybe increasing the "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"cli-timeout"}]},{"type":"text","value":" is all we need here. We implemented the change unfortunately the command still times out. What are we doing wrong?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We found ourselves source diving the "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"scout:import"}]},{"type":"text","value":" command. And luckily we found the culprit for our issues. See "},{"type":"element","tag":"a","props":{"href":"https://github.com/laravel/scout/blob/49d2be17c1ff59bc26867cfc8bdafff52aa3cdaa/src/SearchableScope.php#L34-L42","rel":["nofollow"]},"children":[{"type":"text","value":"SearchableScope.php"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-php shiki shiki-themes github-dark github-light","code":"$builder->macro('searchable', function (EloquentBuilder $builder, $chunk = null) {\n    $scoutKeyName = $builder->getModel()->getScoutKeyName();\n\n    $builder->chunkById($chunk ?: config('scout.chunk.searchable', 500), function ($models) {\n        $models->filter->shouldBeSearchable()->searchable();\n\n        event(new ModelsImported($models));\n    }, $builder->qualifyColumn($scoutKeyName), $scoutKeyName);\n});\n","language":"php","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"$builder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"macro"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"'searchable'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"EloquentBuilder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" $builder, $chunk "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    $scoutKeyName "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" $builder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"getModel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"getScoutKeyName"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    $builder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"chunkById"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"($chunk "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" config"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"'scout.chunk.searchable'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"500"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" ($models) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"        $models"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"shouldBeSearchable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"searchable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"        event"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" ModelsImported"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"($models));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    }, $builder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"qualifyColumn"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"($scoutKeyName), $scoutKeyName);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"});\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"chunkById"}]},{"type":"text","value":" here works until it doesn't. Because chunk is just a loop, the more records you have the longer this loop will take. Unfortunately for us we were trying to import more than 2M rows, making us hit our Vapor CLI timeout."}]},{"type":"element","tag":"h2","props":{"id":"how-did-we-solve-it"},"children":[{"type":"text","value":"How did we solve it?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So now that we know the issue, time to write a solution. What do we need?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A replacement command that can scale"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A job that performs the import through a queue"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What do we need to consider?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CLI timeout"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Queue timeout"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Throttling"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The solution we came up with is "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"daisy chaining jobs"}]},{"type":"text","value":". We can accomplish daisy chaining simply by dispatching another instance of the same job within the job itself. To avoid infinite loop we have to make sure we have an exit logic in place. For our case here it stops dispatching a new job when it's at the end of the table."}]},{"type":"element","tag":"pre","props":{"className":"language-php shiki shiki-themes github-dark github-light","code":"class MakeModelSearchable implements ShouldQueue\n{\n    public function __construct(\n        public string $class,\n        public int|string|null $cursor = null,\n        public int $chunk = 500\n    ) {\n    }\n\n    public function handle(): void\n    {\n        /** @var Model $model */\n        $model = new ($this->class);\n\n        // CURSOR BASED PAGINATION\n        $keys = $model::query()\n            ->limit($this->chunk)\n            ->when($this->cursor !== null, function(Builder $q){\n              return $q->where($model->getKeyName(), '>', $this->cursor);\n            })\n            ->pluck($model->getKeyName());\n\n        // THIS IS OUR EXIT LOGIC\n        if($keys->isEmpty()) {\n            return;\n        }\n\n        // CALL SCOUT'S SEARCHABLE METHOD TO PERFORM THE IMPORT\n        $model::query()\n          ->whereIn($model->getKeyName(), $keys)\n          ->searchable();\n\n        // WE DISPATCH ANOTHER JOB WITH A NEW CURSOR\n        static::dispatch($this->class, $keys->last(), $this->chunk);\n    }\n}\n","language":"php","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" MakeModelSearchable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" implements"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" ShouldQueue\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"    public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" __construct"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"        public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" $class,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"        public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" $cursor "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"        public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" $chunk "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" 500\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    ) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"    public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" handle"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" void\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"        /** "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"@var"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" Model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":" $model */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"        $model "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"$this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"class);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"        // CURSOR BASED PAGINATION\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"        $keys "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" $model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"query"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"            ->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"limit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"$this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"chunk)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"            ->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"when"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"$this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"cursor "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"!=="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"Builder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" $q){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"              return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" $q"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"where"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"($model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"getKeyName"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"(), "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"'>'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"$this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"cursor);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"            })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"            ->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"pluck"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"($model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"getKeyName"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"        // THIS IS OUR EXIT LOGIC\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"        if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"($keys"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"isEmpty"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"()) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"            return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"        // CALL SCOUT'S SEARCHABLE METHOD TO PERFORM THE IMPORT\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"        $model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"query"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"          ->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"whereIn"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"($model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"getKeyName"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"(), $keys)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"          ->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"searchable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"        // WE DISPATCH ANOTHER JOB WITH A NEW CURSOR\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"        static::"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"dispatch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"$this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"class, $keys"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"last"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"(), "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"$this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"chunk);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We start the import process with a command that dispatches the first job."}]},{"type":"element","tag":"pre","props":{"className":"language-php shiki shiki-themes github-dark github-light","code":"class ImportScoutModel extends Command\n{\n    protected $signature = 'app:import-scout-model\n            {model : Class name of model to bulk import}\n            {--c|chunk= : The number of records to import at a time (Defaults to configuration value: `scout.chunk.searchable`)}';\n\n    public function handle(): int\n    {\n        $class = $this->argument('model');\n\n        $chunk = $this->option('chunk') ?? config('scout.chunk.searchable');\n\n        MakeModelSearchable::dispatch($class, null, $chunk);\n\n        return self::SUCCESS;\n    }\n\n}\n","language":"php","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" ImportScoutModel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" extends"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" Command\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" $signature "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" 'app:import-scout-model\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"            {model : Class name of model to bulk import}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"            {--c|chunk= : The number of records to import at a time (Defaults to configuration value: `scout.chunk.searchable`)}'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"    public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" handle"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" int\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"        $class "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" $this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"argument"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"'model'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"        $chunk "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" $this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"option"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"'chunk'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" config"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"'scout.chunk.searchable'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"        MakeModelSearchable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"dispatch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"($class, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":", $chunk);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" self::"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"SUCCESS"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With this approach we are able to address the CLI timeout because it's only responsible for dispatching the first job. Queue timeout was already addressed by optimizing our queries. Throttling issues can easily be addressed by tweaking our job class' backoff strategy."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This solution is inspired by "},{"type":"element","tag":"a","props":{"href":"https://planetscale.com/learn/courses/mysql-for-developers/examples/cursor-pagination","rel":["nofollow"]},"children":[{"type":"text","value":"Aaron Francis' cursor pagination lesson"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"lessons-learned-along-the-way"},"children":[{"type":"text","value":"Lessons learned along the way"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When pairing Laravel Scout with Typesense and queue is set to true, be sure to restart your queue after running a "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"scout:flush"}]},{"type":"text","value":" You're gonna get a "},{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"Typesense\\Exceptions\\ObjectNotFound"}]},{"type":"text","value":" exception if you do an import without restarting."}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"what-happened","depth":2,"text":"What happened?"},{"id":"how-did-we-solve-it","depth":2,"text":"How did we solve it?"},{"id":"lessons-learned-along-the-way","depth":2,"text":"Lessons learned along the way"}]}},"_type":"markdown","_id":"content:2.articles:daisy-chaining-laravel-jobs.md","_source":"content","_file":"2.articles/daisy-chaining-laravel-jobs.md","_extension":"md","head":{"script":[{"id":"nuxt-og-image-overrides","type":"application/json","processTemplateParams":true,"innerHTML":{"title":"Daisy Chaining Laravel Jobs","excerpt":"We overcame Laravel Vapor timeout limits by implementing cursor pagination via daisy chaining jobs."},"tagPosition":"bodyClose","tagPriority":30}],"meta":[{"property":"og:image","content":"/__og-image__/image/articles/daisy-chaining-laravel-jobs/og.png"},{"property":"og:image:width","content":1200},{"property":"og:image:height","content":600},{"property":"og:image:type","content":"image/png"},{"property":"og:image:alt"},{"name":"twitter:card","content":"summary_large_image"},{"name":"twitter:image:src","content":"/__og-image__/image/articles/daisy-chaining-laravel-jobs/og.png"},{"name":"twitter:image:width","content":1200},{"name":"twitter:image:height","content":600},{"name":"twitter:image:alt"}]}},{"_path":"/articles/migrated-to-nuxt-content","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Migrated To Nuxt Content","description":"I just migrated my personal site from Statamic into Nuxt. I am using the nuxt-content module configured to be document driven.","layout":"article","publishAt":"2024-05-28","ogImage":true,"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I just migrated my personal site from "},{"type":"element","tag":"a","props":{"href":"https://statamic.com/","rel":["nofollow"]},"children":[{"type":"text","value":"Statamic"}]},{"type":"text","value":" into "},{"type":"element","tag":"a","props":{"href":"https://nuxt.com/","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt"}]},{"type":"text","value":". I am using the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt-content"}]},{"type":"text","value":" module configured to be "},{"type":"element","tag":"a","props":{"href":"https://content.nuxt.com/document-driven/introduction/","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"document driven"}]}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I was initially drawn to the Notion-like block-based rich text editor of "},{"type":"element","tag":"a","props":{"href":"https://nuxt.studio/","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt Studio"}]},{"type":"text","value":", so I played with it using its "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"content-wind"}]},{"type":"text","value":" template. I also liked that you could host your static content using Github pages and use your own custom domain. This was perfect for me who is just starting out with blogging; no-cost and efficient workflow!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Unfortunately, after a couple of days of tinkering with Nuxt studio I encountered a few unrefined functionalities:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Switching between markdown and rich editor is a bit slow üòê"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Live preview caching was consistently inconsistent üò¢"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Custom domain with Github pages was buggy üò§"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Because of those issues, I decided to drop Nuxt studio. I'd like to revisit it once functionalities are more refined."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The good thing is in the process I got my feet wet with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt-content"}]},{"type":"text","value":" specifically its "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"document driven"}]},{"type":"text","value":" mode. And I love it! üòç So my take away was leverage the power and beauty of this framework and just deploy everything on my own using "},{"type":"element","tag":"a","props":{"href":"https://vercel.com/","rel":["nofollow"]},"children":[{"type":"text","value":"Vercel"}]},{"type":"text","value":", which is still no-cost and efficient. By the way, it was because of Nuxt studio's chat support that I discovered Vercel! With Vercel I also have extra analytics and speed insights available üéâü§©."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Don't get me wrong, Statamic is also a great CMS! It is built on top of Laravel so it has a lot of features included out of the box! But that is the thing, for my use case I wanted a "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"simple"}]},{"type":"text","value":", "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"basic"}]},{"type":"text","value":", and "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"for blogging only"}]},{"type":"text","value":" codebase. So a static site generator like "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt-content"}]},{"type":"text","value":" was perfect for me. Besides with Nuxt I can build on top of it if/when needed, I can even have Laravel as my backend."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In conclusion, I love my new setup for my needs right now. I love both Laravel and Nuxt and I will utilize both where they fit the use case."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.articles:migrated-to-nuxt-content.md","_source":"content","_file":"2.articles/migrated-to-nuxt-content.md","_extension":"md","head":{"script":[{"id":"nuxt-og-image-overrides","type":"application/json","processTemplateParams":true,"innerHTML":{"title":"Migrated To Nuxt Content","excerpt":"I just migrated my personal site from Statamic into Nuxt. I am using the nuxt-content module configured to be document driven."},"tagPosition":"bodyClose","tagPriority":30}],"meta":[{"property":"og:image","content":"/__og-image__/image/articles/migrated-to-nuxt-content/og.png"},{"property":"og:image:width","content":1200},{"property":"og:image:height","content":600},{"property":"og:image:type","content":"image/png"},{"property":"og:image:alt"},{"name":"twitter:card","content":"summary_large_image"},{"name":"twitter:image:src","content":"/__og-image__/image/articles/migrated-to-nuxt-content/og.png"},{"name":"twitter:image:width","content":1200},{"name":"twitter:image:height","content":600},{"name":"twitter:image:alt"}]}},{"_path":"/articles/the-best-way-to-give-a-gift","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"The Best Way To Give A Gift","description":"Kyle and I started doing this a couple years ago and it improved the quality of our gifts.","layout":"article","publishAt":"2024-08-12","ogImage":true,"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Today's my birthday and I feel like this is the perfect time to write about this."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Our daughter, Ella, loves surprises. Everytime we go to the toy store she always checks for egg surprise toys, and\nwhen we go to the grocery she always gets herself a Kinder egg chocolate (it's half chocolate, half random toy). So\nnow our house is full of random little toys. She plays with those toys for a little while and forgets about them üòÖ,\nit's the surprise that she loves."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I meditated on this and tried to remember my own childhood. I remembered that I too enjoyed the surprise of\nreceiving random gifts. Up to this day it makes me happy remembering the day I got an unexpected train set gift from\nmy aunt for Christmas. And back in college my church friends surprised me by sneaking into my bedroom at 12 midnight to\nsing me happy birthday, almost gave me a heart attack, but I loved it! üòÇ Now that I'm older it's mosty, \"hey what do\nyou want for your birthday?\" or \"I got you something form your wishlist\"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's talk about wishlists. This was not really a thing when I was young, I think we started doing something like\nthis with my family and friends when I was already in college, and it was mostly during Christmas. It's fun to do\nespecially knowing that you will be receiving something that you know you like."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When I became a husband and a dad, for some reason having a wishlist felt different. I meditated on it and tried to\nunderstand why it felt different. As a husband and a dad, I needed to mature and think about my family, about how my\nactions and words would affect them and our home dynamics. At the same time I thought about how each family member's\nactions and words would affect each other. Then I thought about the circle outside my family that we were\ninfluencing and being influenced by, how everybody's actions and words affect each other. Then I thought about this\ngeneration and what it's like as a whole. As I was meditating on these things a particular topic highlighted itself,\n"},{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"span","props":{"className":["hl"]},"children":[{"type":"text","value":"Entitlement"}]}]},{"type":"text","value":". For some reason it felt like entitlement recently became a subtle common thing with\neverybody in this generation. So I wondered, why is that? I continued with this train of thought and found myself\nconnecting the dots with wishlists. I knew wishlist isn't the root cause of entitlement, but I couldn't shake off the\nthought that it could affect it. I thought about it more. So I compared the two types of gifts, one that's based on\na wishlist and the other that isn't."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Wishlist"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"No wishlist"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Initiated by the receiver"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Initiated by the giver"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"The effort to think about the gift is the receiver"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"The effort to think about the gift is the giver"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Little to no surprise"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Surprise"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Potentially unhappy when receiving something not on the list"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Potentially unhappy when the items on the list are hard to acquire"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This does not stop here though, the more wishlist based gift giving becomes a tradition the more side effects occur.\nPeople may disagree with me on this but from my experience and observation this is what happened/happens.\nAdditionally, it alters the concept of gift giving for little children who started gift giving this way."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Wishlist"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"No wishlist"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Giver becomes complacent"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Giver practices thoughtfulness"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Receiver loses the heart of gratitude and contentment"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Receiver exercises gratitude and contentment"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Receiver subtly becomes an Entitled adult"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Receiver maintains the innocent heart of a child"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"It's about gift-taking"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"It's about gift-giving"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So I discussed these meditations with my wife, Kyle, and she agreed with me. A couple of years ago we decided to\nnever do wishlists again. We concluded that a gift is not a receivers rights but a benefit brought about from the\nrelationship. A gift represents the heart and mind of the giver towards the receiver. Wishlist destroys that\nexpression. We realized that in a very subtle way, wishlists destroys the art of giving and the heart of receiving."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Wishlists destroys the art of giving and the heart of receiving."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For us, this is the best way to give gifts. From the heart and mind of the giver to the hands of the receiver."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.articles:the-best-way-to-give-a-gift.md","_source":"content","_file":"2.articles/the-best-way-to-give-a-gift.md","_extension":"md","head":{"script":[{"id":"nuxt-og-image-overrides","type":"application/json","processTemplateParams":true,"innerHTML":{"title":"The Best Way To Give A Gift","excerpt":"Kyle and I started doing this a couple years ago and it improved the quality of our gifts."},"tagPosition":"bodyClose","tagPriority":30}],"meta":[{"property":"og:image","content":"/__og-image__/image/articles/the-best-way-to-give-a-gift/og.png"},{"property":"og:image:width","content":1200},{"property":"og:image:height","content":600},{"property":"og:image:type","content":"image/png"},{"property":"og:image:alt"},{"name":"twitter:card","content":"summary_large_image"},{"name":"twitter:image:src","content":"/__og-image__/image/articles/the-best-way-to-give-a-gift/og.png"},{"name":"twitter:image:width","content":1200},{"name":"twitter:image:height","content":600},{"name":"twitter:image:alt"}]}},{"_path":"/articles/year-in-review-2023","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"Year In Review 2023","description":"This is my first 'Year in review', and the motivation to write this came from Aaron Francis's year in review. So, thank you, Aaron!","layout":"article","publishAt":"2023-12-31","ogImage":true,"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is my first 'Year in review', and the motivation to write this came from "},{"type":"element","tag":"a","props":{"href":"https://aaronfrancis.com/2023/year-in-review-2023","rel":["nofollow"]},"children":[{"type":"text","value":"Aaron Francis's year in review"}]},{"type":"text","value":". So, thank you, Aaron!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"At the beginning of 2023 I've wanted to start journaling because I felt like the thoughts in my head are getting too cluttered and it was hard to think straight. This was probably because of the many things me and my family had to do. Since January, we have had a bunch of tasks lined up:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"My daughter's minor surgery"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"My daughter's first time going to school"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Find a bigger house (closer to the school)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Plan for a church wedding (me and my wife did a civil wedding back in 2019)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Start a joint habit with my wife to eat healthily and exercise (I was already obese)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Get a cat (I thought it would be like buying a toy, but in reality, it was more like adopting a toddler)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Start personal project"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Hunt for a new job"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Although I intended to start journaling, I was only able to start doing it on December 6. Obviously, I am a chronic procrastinator. But hey, I started it and have been consistent about it since then. Also, eliminating that habit of procrastination is one of my reasons for writing. I believe it will help me understand myself better. Now that I'm into journaling, I couldn't agree more when Aaron said, \"year in reviews is a helpful exercise\". So here goes my review!"}]},{"type":"element","tag":"h2","props":{"id":"new-house"},"children":[{"type":"text","value":"New house"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The year was great for me and my family, moving from a condo to a bigger house was pivotal for us in many ways. Finally, our daughter wasn't stuck indoor to be raised by Youtube and Netflix. For the first time she had neighbors to play with, and a cat to take care of. These were things we knew are beneficial for her development. Also, friends and family visited more often. We had a bigger space to host dinners and parties. I'm happy we moved, we needed it!"}]},{"type":"element","tag":"h2","props":{"id":"montessori-school"},"children":[{"type":"text","value":"Montessori school"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"She's no longer a baby! As a parent, I have this conflicting feeling of happiness and sadness. I'm happy she's growing, at the same time sad that she is. I'm going to miss the cute little feet that I could bite. But I'm also excited to see all the things that she'll accomplish."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This year, we enrolled her in a Montessori school. We believe in the Montessori way (if done correctly), we see a different kind of character with people who were raised this way. Their discipline and motivation seem more intrinsic: take Stephen Curry and Taylor Swift, for example. And you know what? So far, so good; we're happy with what we're seeing from our daughter‚Äîthe habits and manners she's picking up from school have been great! She loves going to school, she loves her classmates and her teachers, she's always excited for show and tell. I feel like we made the right move."}]},{"type":"element","tag":"h2","props":{"id":"work-work-work"},"children":[{"type":"text","value":"Work! Work. Work?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Let's start with Work?"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So this year a college friend and I started a Baby Diapers business. We had a Shopify store and Facebook for our online channels. We were working on pairing with hospitals to include our diapers as part of their newborn kits. And we were trying to find resellers and sub distributors. We started off the business with excitement, but as months passed my wife and I realized this just wasn't working for us. Many times, we didn't know what we were doing. Warehousing and logistics were difficult! Finding a reliable delivery rider was tough. Our last rider stole a few days worth of cash-on-delivery collection. Resolving issues with customers was draining and sometimes frustrating. I think we could have figured all these issues out if we stuck with it, but given our family's current situation, we couldn't. We were more focused with other areas of our life. So we decided to part ways with my college friend, and gave him all of our company shares as we exited that business."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Then there's work at my day job."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"My day job was something I really enjoyed. I loved the people I work with and I love the things we're building. Q1 this year, the company underwent a merger and upper management when through an overhaul. Unfortunately, company changes involved a bunch of layoffs. I was asked to select a few members from my team to let go. It was a tough decision and I had to break the news to them myself. As a team lead, it's heartbreaking to let go of people you love working with and who did no wrong. Since the layoffs, the team engagement dropped and enthusiasm to work flatlined. From there moving forward, everybody was just going thru the motions. For the rest of the year, there was a hovering feeling of job insecurity. To make the long story short, the company eventually shut down the entire Philippine team in Q4 this year."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Despite all the events within the company, it was still a productive year for me. I learned a bunch of stuff and did a bunch of integration work with some of these interesting tools and services: "},{"type":"element","tag":"a","props":{"href":"https://www.cdata.com/sync/","rel":["nofollow"]},"children":[{"type":"text","value":"CData Sync"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://www.fivetran.com/","rel":["nofollow"]},"children":[{"type":"text","value":"Fivetran"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://docs.getdbt.com/","rel":["nofollow"]},"children":[{"type":"text","value":"DBT Core"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://www.builder.io/","rel":["nofollow"]},"children":[{"type":"text","value":"Builder.io"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"My personal projects: here I'm excited to work!"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So this year, I released a couple of public packages. One is under the company's Github organization and another is under mine. I am new to this public contribution thing so it was fun learning and building it. These packages are not refined yet, but to me that's ok for now. As a first timer, my goal was just to get started."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/solgenpower/laravel-openweather","rel":["nofollow"]},"children":[{"type":"text","value":"solgenpower/laravel-openweather"}]},{"type":"text","value":" We used this on the app we built to collect weather information from "},{"type":"element","tag":"a","props":{"href":"https://openweathermap.org/","rel":["nofollow"]},"children":[{"type":"text","value":"OpenWeather"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/princejohnsantillan/id-base-converter","rel":["nofollow"]},"children":[{"type":"text","value":"princejohnsantillan/id-base-converter"}]},{"type":"text","value":" A tiny tool to make it easy to encode integers into different bases or into a symbol set of your own. Please do try it out!"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I'm looking forward to building more stuff!"}]},{"type":"element","tag":"h2","props":{"id":"wife-and-life"},"children":[{"type":"text","value":"Wife and life"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I married the love of my life back in 2019; it was a civil wedding. It wasn't the best start. A lot of rebellion was involved and we got pregnant outside of wedlock. It caused a lot of issues, strained a lot of relationships, and we found ourselves isolated from church, family, and friends. The details do not belong in this post so this is just an overview of what happened."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We admit to the mistake we made. It was bad, we did wrong. It was a season full of pain, anger, disappointment, loneliness, doubt, and confusion. But we held on, little by little humbled ourselves, allowed the Lord to correct us, and reconciled with everybody we've hurt. It took 5 years to reach a point where we feel like everything was redeemed and back in its place. So here we are now; we want to celebrate God's redemption with a church wedding that's totally dedicated to His goodness."}]},{"type":"element","tag":"h2","props":{"id":"_2024-new-beginnings"},"children":[{"type":"element","tag":"span","props":{"className":["text-primary-500"]},"children":[{"type":"text","value":"2024: New beginnings!"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So 2024! I'm excited! My family is looking forward to this. We know it's gonna be a year full of new beginnings for us. The church wedding is the flipping of a new page, a new chapter, a new season of our lives."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The past few years for me was full of personal growth. I am determined and very curious to see what my life will look like and what my family will look like if I put everything in order."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In terms of physical health, I started to eat healthily and do consistent exercise. I haven't figured all of this out yet, but the journey has started. I'm looking into keto and fasting, and eating a lot of greens. My wife and I are following "},{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/carolinegirvan","rel":["nofollow"]},"children":[{"type":"text","value":"Caroline Girvan"}]},{"type":"text","value":" for our workouts. And, sleep! I averaged 4-5 hours of sleep over the last couple of years. That needs to change! I am reorganizing my life to have 6-8 hours of sleep."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For mental and emotional health, I started journaling. I'm also committed to reading more books this year."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All in all, 2024 is a year for me to build good habits. I believe good habits is a prerequisite to any kind of success."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"new-house","depth":2,"text":"New house"},{"id":"montessori-school","depth":2,"text":"Montessori school"},{"id":"work-work-work","depth":2,"text":"Work! Work. Work?"},{"id":"wife-and-life","depth":2,"text":"Wife and life"},{"id":"_2024-new-beginnings","depth":2,"text":"2024: New beginnings!"}]}},"_type":"markdown","_id":"content:2.articles:year-in-review-2023.md","_source":"content","_file":"2.articles/year-in-review-2023.md","_extension":"md","head":{"script":[{"id":"nuxt-og-image-overrides","type":"application/json","processTemplateParams":true,"innerHTML":{"title":"Year In Review 2023","excerpt":"This is my first 'Year in review', and the motivation to write this came from Aaron Francis's year in review. So, thank you, Aaron!"},"tagPosition":"bodyClose","tagPriority":30}],"meta":[{"property":"og:image","content":"/__og-image__/image/articles/year-in-review-2023/og.png"},{"property":"og:image:width","content":1200},{"property":"og:image:height","content":600},{"property":"og:image:type","content":"image/png"},{"property":"og:image:alt"},{"name":"twitter:card","content":"summary_large_image"},{"name":"twitter:image:src","content":"/__og-image__/image/articles/year-in-review-2023/og.png"},{"name":"twitter:image:width","content":1200},{"name":"twitter:image:height","content":600},{"name":"twitter:image:alt"}]}}],"navigation":[{"title":"Prince John","_path":"/"},{"title":"Articles","_path":"/articles","children":[{"title":"Articles","_path":"/articles"},{"title":"2024 Halftime Report","_path":"/articles/2024-halftime-report","layout":"article"},{"title":"Daisy Chaining Laravel Jobs","_path":"/articles/daisy-chaining-laravel-jobs","layout":"article"},{"title":"Migrated To Nuxt Content","_path":"/articles/migrated-to-nuxt-content","layout":"article"},{"title":"The Best Way To Give A Gift","_path":"/articles/the-best-way-to-give-a-gift","layout":"article"},{"title":"Year In Review 2023","_path":"/articles/year-in-review-2023","layout":"article"}]}]}